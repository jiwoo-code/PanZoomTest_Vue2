methods: {
  updateMinimapViewportRect(flowchartTransform) {
    const { x, y, scale } = flowchartTransform;

    const fcWidth = this.flowchartNodeBounds.width;
    const fcHeight = this.flowchartNodeBounds.height;

    const mmWidth = this.minimapNodeBounds.width;
    const mmHeight = this.minimapNodeBounds.height;

    // ì¶•ë³„ ë¹„ìœ¨ ê³„ì‚° (ê°€ë¡œ/ì„¸ë¡œ ë…ë¦½ì )
    const ratioX = mmWidth / fcWidth;
    const ratioY = mmHeight / fcHeight;

    // í˜„ì¬ ë³´ì´ëŠ” ì˜ì—­ í¬ê¸°(flowchart ê¸°ì¤€)
    const visibleWidth = this.flowchartContainer.clientWidth / scale;
    const visibleHeight = this.flowchartContainer.clientHeight / scale;

    // ğŸ”¥ ë³€ê²½ëœ ë¶€ë¶„: í™”ë©´ ì¤‘ì•™ ì¢Œí‘œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚° ğŸ”¥
    // í˜„ì¬ ë³´ì´ëŠ” ì˜ì—­ì˜ ì¤‘ì•™ ì¢Œí‘œ (flowchart ê¸°ì¤€)
    const centerX = (-x / scale) + visibleWidth / 2;
    const centerY = (-y / scale) + visibleHeight / 2;

    // ë¯¸ë‹ˆë§µì—ì„œ viewportRect ìœ„ì¹˜ ê³„ì‚° (ì¤‘ì•™ ê¸°ì¤€)
    let viewportWidth = visibleWidth * ratioX;
    let viewportHeight = visibleHeight * ratioY;

    let viewportX = (centerX * ratioX + this.minimapNodeBounds.left) - viewportWidth / 2;
    let viewportY = (centerY * ratioY + this.minimapNodeBounds.top) - viewportHeight / 2;

    // ğŸ”¥ ì œí•œ ë¡œì§ ìœ ì§€: minimapNodeBounds ì˜ì—­ ë‚´ë¡œ ì œí•œ ğŸ”¥
    const minX = this.minimapNodeBounds.left;
    const minY = this.minimapNodeBounds.top;
    const maxX = this.minimapNodeBounds.left + mmWidth - viewportWidth;
    const maxY = this.minimapNodeBounds.top + mmHeight - viewportHeight;

    if (viewportWidth >= mmWidth) {
      viewportX = minX;
      viewportWidth = mmWidth;
    } else {
      viewportX = Math.max(minX, Math.min(maxX, viewportX));
    }

    if (viewportHeight >= mmHeight) {
      viewportY = minY;
      viewportHeight = mmHeight;
    } else {
      viewportY = Math.max(minY, Math.min(maxY, viewportY));
    }

    // ê¸°ì¡´ ê°’ê³¼ ë¹„êµí•˜ì—¬ ë³€ê²½ëœ ê°’ë§Œ ì—…ë°ì´íŠ¸
    if (
      this.viewportRect.x !== viewportX ||
      this.viewportRect.y !== viewportY ||
      this.viewportRect.width !== viewportWidth ||
      this.viewportRect.height !== viewportHeight
    ) {
      this.viewportRect = {
        x: viewportX,
        y: viewportY,
        width: viewportWidth,
        height: viewportHeight
      };
    }
  }
}
