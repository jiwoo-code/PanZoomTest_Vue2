methods: {
  updateMinimapViewportRect(flowchartTransform) {
    const { x, y, scale } = flowchartTransform;

    const fcWidth = this.flowchartNodeBounds.width;
    const fcHeight = this.flowchartNodeBounds.height;

    const mmWidth = this.minimapNodeBounds.width;
    const mmHeight = this.minimapNodeBounds.height;

    // ì¶•ë³„ ë¹„ìœ¨ ê³„ì‚° (ê°€ë¡œ/ì„¸ë¡œ ë…ë¦½ì )
    const ratioX = mmWidth / fcWidth;
    const ratioY = mmHeight / fcHeight;

    // í˜„ì¬ ë³´ì´ëŠ” ì˜ì—­ í¬ê¸°(flowchart ê¸°ì¤€)
    const visibleWidth = this.flowchartContainer.clientWidth / scale;
    const visibleHeight = this.flowchartContainer.clientHeight / scale;

    // ë¯¸ë‹ˆë§µ ì‚¬ê°í˜• ë°•ìŠ¤ ìœ„ì¹˜ ë° í¬ê¸° ê³„ì‚°
    let viewportX = (-x / scale) * ratioX + this.minimapNodeBounds.left;
    let viewportY = (-y / scale) * ratioY + this.minimapNodeBounds.top;
    let viewportWidth = visibleWidth * ratioX;
    let viewportHeight = visibleHeight * ratioY;

    // ğŸ”¥ ì—¬ê¸°ì„œë¶€í„° ì¶”ê°€ëœ ì œí•œ ë¡œì§ ğŸ”¥
    // minimapNodeBoundsë¥¼ ë²—ì–´ë‚˜ì§€ ì•Šë„ë¡ ì œí•œ
    const minX = this.minimapNodeBounds.left;
    const minY = this.minimapNodeBounds.top;
    const maxX = this.minimapNodeBounds.left + mmWidth - viewportWidth;
    const maxY = this.minimapNodeBounds.top + mmHeight - viewportHeight;

    // viewportRectê°€ minimapNodeBounds ë‚´ì—ì„œë§Œ ì›€ì§ì´ë„ë¡ ë³´ì •
    if (viewportWidth >= mmWidth) {
      // viewportê°€ ë…¸ë“œ ì˜ì—­ë³´ë‹¤ ë” í´ ê²½ìš° ì¢Œìš°ë¡œ ê³ ì •
      viewportX = minX;
      viewportWidth = mmWidth;
    } else {
      viewportX = Math.max(minX, Math.min(maxX, viewportX));
    }

    if (viewportHeight >= mmHeight) {
      // viewportê°€ ë…¸ë“œ ì˜ì—­ë³´ë‹¤ ë” í´ ê²½ìš° ìƒí•˜ë¡œ ê³ ì •
      viewportY = minY;
      viewportHeight = mmHeight;
    } else {
      viewportY = Math.max(minY, Math.min(maxY, viewportY));
    }
    
    // ê¸°ì¡´ ê°’ê³¼ ë¹„êµí•˜ì—¬ ë³€ê²½ëœ ê°’ë§Œ ì—…ë°ì´íŠ¸
    if (
      this.viewportRect.x !== viewportX ||
      this.viewportRect.y !== viewportY ||
      this.viewportRect.width !== viewportWidth ||
      this.viewportRect.height !== viewportHeight
    ) {
      this.viewportRect = {
        x: viewportX,
        y: viewportY,
        width: viewportWidth,
        height: viewportHeight
      };
    }
  }
}
